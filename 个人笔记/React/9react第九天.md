# 9 react 第九天

## 1  移动端1像素的问题

### 产生原因

- 在我们使用的px单位时,往往指的是设备独立像素,和物理像素是有区别的,1px在不同的设备下,真实的物理像素是不同的,我们应该根据对应设备的dpr,设置不同的大小

### 解决方法1

- 给对应的需要设置的线段设置对应的高度,根据媒体查询结果,设置对应的值,我们不直接设置器高度,这样不好,我们设置对应线条的一个transform:scaleY(),该属性是根据Y轴,变为之前的高度的多少倍

### 解决方法2

- 给对应的元素设置伪类元素,让对应伪类根据定位,还是使用transform:scaleY()来进行控制,

### 两个方法虽然是都是使用的transform:scaleY()来设置对应的高度,但是实际上,使用伪类效果更好,因为它不是真实存在的DOM元素,它不会影响页面的结构,不会引起重绘重排,而且更好控制

## 2 移动端横向滑屏

### 1 移动端基本事件

- 1 touchstart  元素上触摸开始触发
- 2 touchmove 元素上移动会触发
- 3 touchend 手指离开会触发

### 横向滑屏

- 1 设置对应的起始位置startx移动位置targetx,移动速度speedx
- 2 使用addEventListener给对应元素绑定一个touchstart事件,事件的回调函数内部设置对应的起始位置,根据e.changedTouchs[0].clientX获取x轴的距离
- 3 使用addEventListener给对应元素绑定一个touchmove事件,

	- 1 根据e.changedTouchs[0].clientX获取对应的移动位置,并且赋值给对应的endx
	- 2 让当前的位置减去上一次的开始位置,判断其值的正负
	- 3 如果值为正,则给对应target值加一个speed,如果为负,则减去一个speed,
	- 4  设置临界值根据对应元素的宽度和对应屏幕宽度的值进行计算
	- 5  将对应要移动的元素设置对应的transform属性,属性值为`translateX(${targetX})`
	- 6 在设置完对应的值之后,让当前的move的位置,等于起始位置

## 3 点击穿透

### 点击穿透实际上就是元素在点击上一个图层后,下面的图层会触发的点击事件也会触发,其实最主要的原因是,移动端为了识别用户是否双击,把对应的事件延迟到了300ms,所以当我们设置的时候,我们的已经结束触摸,但是300ms后仍然会触发对应的点击click事件

### 1 解决方案 1

- 1 给所有的a标签绑定点击事件,并且阻止默认事件.e.preventDefault( )
- 2 给所有的a标签元素绑定touchend事件,在回调函数内部,使用对应的方法,让对应的a标签实现跳转功能

	- window.location=this.href

### 2 解决方案2 

- 引入对应的fastclick

