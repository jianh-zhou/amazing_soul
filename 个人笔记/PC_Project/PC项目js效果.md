# PC 项目 js效果

## 放大镜

### 蒙版

- 1 鼠标移入

	- 蒙版盒子

		- 1 创建一个div盒子
		- 2 为盒子添加一个类名,并在对应的样式中书写样式
		- 3 将该盒子插入到父级盒子中

	- 大图盒子

		- 1 创建一个div盒子,
		- 2 为盒子添加一个类名,并在对应的样式中书写样式
		- 3 为盒子插入默认大图,设置超出隐藏
		- 4 将该盒子插入到对应父级盒子中

- 2 鼠标移动,盒子跟着移动

	- 蒙版盒子移动注意点

		- 鼠标的位置一直在蒙版盒子中心
		- 获取位置时,边框也需要考虑
		- 盒子定位的偏移值=鼠标的clinent距离-蒙版父级盒子距离视口的距离-蒙版盒子的一半(鼠标一直在中间)
		- 判断盒子位置的临界值,进行赋值

	- 大图盒子图片变化

		- 根据小图盒子的定位便宜值,计算大图盒子中图片的便宜值
		- 大图小图盒子移动的比例关系

			- 大图盒子能走的距离/小图盒子能走的距离=大图盒子走过的距离/小图盒子走过的距离

		- 大图盒子定位偏移值是负的

- 3 鼠标移出

	- 蒙版盒子

		- 1 删除蒙版盒子节点
		- 2 将使用过的对象赋值为null,节省空间
		- 3 将事件函数值赋值为null , 节省空间

	- 大图盒子图片

		- 1  删除对应的大图盒子,也就直接把它的子元素图片一起删除了

## 滚动图

### 向右滑动

- 1 绑定单击事件响应函数
- 2 判断当前点击后还能走的距离是否大于正常每一步的距离,如果大于,则正常走一步. 如果距离不足一步的距离,则直接走完剩余的距离,
- 3 没执行一次将对应能走的距离赋值给对应的left偏移值,偏移值为负的,且需要加上单位

### 向左移动

- 1 绑定单击事件响应函数
- 2 判断当前位置的偏移值是否大于一步所走的距离值,如果大于,则走一步,如果小于,则直接走到最左边
- 3 每执行一次将对应能走的距离赋值给left偏移值,赋值的偏移值是正的,且需要加上单位

## 价格根据所选属性的js效果

### 核心

- 1 创建一个空数组
- 2 点击对应属性或者改变购物车数量一次,计算出数组中对应对象,所添加的价钱变化值,将它们求和
- 3 将这个变化值加上价钱的默认初始值,乘以商品的数量,得到最终的价格,再将其付赋值给显示的价格
- 4 定义全局变量

	- 1 定义一个价格的初始值
	- 2 定义一个购物车数量的初始值为1

### 1 点击对应选项价格变化

- 1 为每一个dl中的dd绑定单击响应函数,保存当前点击dd的dl的顺序值,为了在数组中的位置更好添加
- 2 每次点击dd创建一个标签,并为标签添加一个自定义属性,保存当前点击dd的价格变化值
- 3 将创建的标签添加根据dl的顺序值,添加到对应的数组中
- 4 遍历数组将对应的标签插入到对应的盒子中,并给该标签设置好默认样式
- 5 将显示属性的盒子的内容清空,方便后面遍历添加
- 6  遍历数组值标签的自定义价钱属性,计算总和,再和初始值进行相加,乘以对应的购物车数量值,最终得到最终的 价格,并插入到价格标签中

### 2 删除对应控件价格变化

- 1 在创建添加新标签时,在该标签中添加一个a标签,用来删除对应的标签
- 2 给所有的a标签添加一个单击响应函数,让其可以删除自己的父元素,也就是新添加的标签
- 3 每删除一次,也会删除数组中的新标签,通过遍历数组,计算删除后的价钱和,然后通过计算将值赋值给价格标签中
- 4 在删除当前标签时,让其对应的dd的第一个兄弟,恢复默认颜色

### 3 购物车数量变化改变价钱

- 加 1 

	- 1 给其绑定一个单击响应事件
	- 2 没点击一次购物车里的数量加1,计算添加属性控件的值再加上价格的初始值,最终乘以购物车数量
	- 3 将最终的值,添加到显示的价格上

- 减1 

	- 1 给其绑定一个单击响应事件
	- 2 ,每点击一次购物车的数量减1,但是最小值为1,计算添加属性的值,再加上价格的初始值,最终乘以购物车数量
	- 3 将最终的值,添加到显示的价格上

## 动态添加数据

### 1 遍历所有的对应数据,创建对应的标签,添加到对应的标签中

### 2 在不方便遍历时,利用模板字符串将数据添加到对应结构中,让数据成为动态的

