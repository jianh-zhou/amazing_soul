# 7.8 js 第六天

## 栈

### 栈结构中开辟的内存, 内存较小,运行速度快,在用完可以自动回收,自动开辟一块空间

### 先进后出

## 堆

### 堆结构中开辟的内存,内存较大,运行速度较慢,在使用时,需要程序员申请开辟空间,在使用完之后,也是需要自己进行回收

### 先进先出

## java 中的栈和堆的特点

### 在使用时,几乎都是自动开辟空间,在使用完时.它有一种垃圾回收机制,会对不使用的进行垃圾回收

## 执行环境

### 全局执行环境

- 是系统自动默认的一种执行环境
- javascript 代码执行开始到 javascript 代码执行完毕

### 函数执行环境

- 在函数调用时,会创建函数执行环境
- 在调用函数时到函数执行完毕
- 每调用一次函数,函数的执行环境都是不一样的,虽然他们调用的都是同一个函数

### 函数执行环境在执行完会自动销毁

### 每个执行环境我们也称之为执行上下文

### 全局执行环境会在关闭网页时销毁

## 执行环境的阶段

### 创建阶段

- 一上来就进入了创建阶段
- 函数执行环境是在函数调用之后到代码还未真正执行之前

### 执行阶段

- 真正的执行解释代码

## 作用域

### 定义:变量可以使用的范围

### 全局作用域

- 在全局执行环境创建后会同时生成全局作用域

### 函数作用域( 局部作用域)

### 它可以隔离变量

## 全局变量和局部变量

### 全部变量

- 在全局作用域定义的变量叫全局变量
- 全局作用域的变量可以在全局作用执行环境中可以执行,也可以在函数作用域中执行

### 局部变量

- 在局部作用域定义的变量叫局部变量
- 函数作用域里的变量只能在函数作用域中使用,全局作用域中不可以使用

## 作用域链

##### 作用域链是函数查找变量的这一系列过程

##### [[scope]]

- 在函数定义时,会有一个[[scope]]属性,该属性存储函数定义时的作用域层级关系
- 这个属性是函数底层的,但是不能使用

##### 在函数调用时,会生成一个自身的函数作用域,然后和之前的 scopp 属性相加,最后就形成了函数作用域链

##### 函数作用域链的最开始端是当前的函数作用域,最后端是全局作用域

##### 在寻找变量时,就是沿着作用域链寻找,方向是自身的作用域到全局作用域.一层一层往上找,如果找到,就不再继续寻找

## 变量提升

##### 最开始是函数进行提升,里面就是函数的一个整体

##### 然后就是变量进行提升

##### 在声明完这些东西后,按照正常的从上到下的顺序执行代码

##### 不管是全局执行环境还是函数执行环境都会对变量进行提升

## 数据的储存

### 基本数据类型的储存

- 基本数据类型的储存是在执行栈的执行环境中直接进行储存
- 以标识符和值的形式直接进行存储

### 对象的储存

- 对象在储存的过程中,会在栈中开辟一个独立的空间,用来储存对象中的数据,会把对象名和对象在堆中的对应储存地址对应存储在执行栈中,

### 函数内部对象的储存

- 在最开始的全局执行环境中,函数作为一个对象,会在堆中开辟一个独立的空间,把函数中的数据储存起来,
- 当函数在调用时,函数会创建一个函数执行环境,然后对其中的变量和对象进行储存,函数中的对象也会单独在堆中开辟一个独立的空间,用来储存该对象

### 查找变量和执行环境有关系,和堆没有关系,堆只是用来存储对象数据类型的

1.程序在最开始执行时,会开辟一个执行栈空间,然后创建一个全局执行环境,并进行压栈,就是将这个全局作用环境放在最下面.在执行代码的过程中,如果遇到基本数据类型的变量,会直接在全局执行环境中存储.如果遇到对象,则会在堆中开辟一个新的空间,存储对象中的数据,在执行栈中,储存对象名和对象在栈中存储的地址.

2 在代码执行过程中,如果遇到函数的调用,会在执行栈中创建一个函数执行环境,并压在栈中,在函数执行时,会进行和全局执行环境一样的基本操作;当函数调用完时,会销毁当前的函数执行环境,和他一切都会进行销毁;

3 在代码执行完时,全局执行环境也会销毁;
