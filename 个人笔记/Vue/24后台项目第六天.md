## 1 修改 SPU

### 1 准备一个初始的 Spu 信息对象,并且的搭建对应的结构

### 2 请求对应的接口,获取修改或者添加 sku 的初始数据

- 1 所有的品牌信息数据
- 2 当前 spu 的所有图片
- 3 所有的销售属性数组
- 4 当前 spu 下的销售属性数组

### 3 将获得的初始化展示在界面上

- 1 在添加销售属性时,计算当前 spu 对应的销售属性和所有销售属性之间的"差值",将该计算出来的数组添加到对应的下拉框上
- 2 将所有的品牌属性绑定字啊品牌的下拉框列表中
- 3 将获取到的图片展示到图片列表中,而且在添加图片和删除图片的回调中,将 fileLise 图片数组,赋值给最开始获取到的图片数组中
- 4 将当前 spu 对应的销售属性数组,展示到对应的表格中,在表格每一行对应的销售属性对象中,可以添加在该对象中的销售属性值数组中添加销售属性值对象

### 4 点击保存,添加 spu

- 1 过滤图片数组,因为图片上传后,该图片对象和要上传的图片对象不一样,我们需要过滤,将该图片改变成对应的上传图片对象的属性
- 2 过滤销售属性数组,在添加完对应的销售属性时,会给该对象添加一个属性,在添加销售属性值对象时,也会给当前的销售属性对象添加一个 edit 属性,我们需要在上传时,将这两属性删除,而且判断对应属性对象的属性值数组长度是否为 0,如果为 0,就不上传,
- 3 请求对应的 api 接口,将该 spuInfo 对象作为参数传入
- 4 重置数据
- 5 回到 spu 展示页面,更新 spu 数据

## 2 给当前 spu 添加 sku

### 1 创建组件,并且在 spu 显示信息组件中注册使用,给对应的点击添加 sku 的按钮,绑定点击事件,实现点击显示添加 sku 的页面.并且把并且把当前的 spu,所有的三级分类 id 传递过去

### 2 使用 element-ui 组件库搭建界面,并且根据添加 sku 的数据,设置对应的初始数据,

### 3 调用对应的 api 接口获取到对应的数据

- 1 根据三级分类的三个 id 获取到对应的品台属性,
- 2 根据 spuid 获取到当前的销售属性数组
- 3 根据 spuid 获取到所有的 图片数组,并且在获取后给图片的每一个图片对象添加一个 isDefault 属性,该属性用来设置默认图片

### 4 将获取到的数据展示在页面上

- 1 在遍历时,在下拉框的标签中,添加 一个 v-model,该指令,用来保存选中的下拉选项的信息,保存的信息需要看添加 sku 时,所需要的参数
- 2 在添加图片的表格中,添加图片的事件时,选中的图片会保存到一个数组中,将该数组作为最后上传的图片数组.设置默认图片时,绑定点击事件,遍历图片,设置 isDefault 属性
- 3 展示销售属性,对应的下拉框组件标签上添加一个 v-model 指令,用来保存添加 sku 信息时所需要的数据

### 5 给每一个文本输入框添加一个 v-model 指令,该指令在文本输入后,会把对应的文本输入的值保存到添加的 sku 的对应属性中

### 6 在对应的保存 sku 的回调函数中,过滤数据

- 1 过滤图片数组,使用 map 方法,将所需要的属性添加到以对象的形式添加到数组中,最终赋值给要上传的图片数组
- 2 过滤品台属性数组,将最开始给每一品台属性对象添加的属性拿出来,最后判断该属性是否存在,如果存在,则添加到对应的数组中返回,否则不添加
- 3 过滤对应的销售属性数组,使用 reduce 方法,判断是否有对应绑定的属性,如果有,则字啊 pre 数组中添加一个对象,该对象值就是对应的销售属性值的 id

### 7 发送请求,调用对应的 api 接口函数,接口请求成功后,弹出对应的提示,返回到 spu 展示的界面,更新数据

## 3 查看 spu 下对应的所有 sku 数据

### 1 根据对应的 spuId 获取到当前 spu 对应的所有 sku 数据列表信息数组

### 2 将该数据展示在对应的页面中,最终渲染

## 4 展示所有的 sku

### 1 传入对应的初始页码数和一页显示的条数,获取到当前页的 sku 信息数据数组,

### 2 根据 sku 信息数据数组展示到页面中,

### 3 设置对应的分页组件

## 5 上下架 sku

### 1 为对应的上下假按钮,绑定一个相同的事件,通过当前 sku 的 isSale 值,设置对应的按钮是否显示隐藏

### 2 定义点击按钮的回调函数,该函数中判断当前的 isSale 值,然后进行上架或者下架的操作,调用对应的 api 接口函数,最后更新页面

## 基本流程

### 1 从初始界面跳转到对应的界面,并且搭建界面

### 2 初始化数据

### 3 将对应的数据展示到页面,在操作时,准备一个需要传递的初始数据对象,该数据,会作为请求的参数,根据这个参数的标准,获取到参数所需要的所有数据

### 4 过滤一些数据,最终发送请求,跳转到对应的初始页面,重置数据(下次操作时,会有上次操作的数据)
