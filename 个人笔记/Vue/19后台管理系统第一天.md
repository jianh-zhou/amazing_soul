# 18 后台管理系统第一天

## 1  封装对应的api接口函数

### 1 引入对应的二次封装的axios,rquest

- import request from '@/utils/request'

### 2 定义一个变量,将该文件中所有公共的地址保存起来

- const API_NAME = '/admin/product/baseTrademark'

### 3 使用export default 暴露一个对象,该对象中有多个方法,每一个方法对应一个接口的api函数

### 4 品牌管理api函数的封装

- 封装方式

	- 使用配置对象的形式

		- request({ })
		- 例子

			- getTrademarkById(id) { return request({ url:`${API_NAME}/getTrademarkList/${id}`, method:'GET'})}

	- 调用request对应请求方式的形式

		- request,get( )
		- 例子

			- getTrademarkById(id){ return request.get(`${API_NAME}/getTrademarkList/${id}`)

- 1 根据id获取对应的品牌信息数据

	- 参数 id

- 2 获取当前页的品牌信息数据

	- 参数1 limit(一页显示的数据条数)
	- 参数2 page( 显示的页码数)

- 3 获取所有的品牌信息数据数组
- 4 添加新的品牌信息数据数据

	- trademark 要添加的品牌信息对象

- 5 修改对应的品牌信息数据

	- trademark 要修改对应的品牌信息对象

- 6 删除对应的品牌信息数据

	- 参数 id

## 2 实现品牌管理的结构及数据展示

### 1 添加一个添加的按钮,使用element-ui中的标签.设置对应的类型

### 2 定义对应的响应式数据

- page :1 

	- 默认显示的页码数

- limit:3 

	- 默认一页显示的数据条数

- total:0

	- 总的数据条数

- trademarks:[ ]

	- 当前页的品牌信息数据数组

- dialogFormTrademark :false

	- 点击添加按钮,弹出的对话框,默认为false不显示

- form对象

	- tmName: ' '

		- 添加品牌时的name,默认为空

	- logoUrl:' '

		- 添加品牌时对应图片的src地址,默认为空

### 3 ,获取当前列表信息数据

- 1 定义一个方法,获取数据

	- 1 调用对应的api接口函数,获取请求返回的数据

		-  getTrademarkList 接口函数

	- 2 判断响应数据的状态码是否为200
	- 3 如果状态码为200 .则结构返回的数据result.data,更新对应的数据

		- const {total,records}=result.data
		- this.total=total
		- this.trademarks=records

	- 如果不等于200,则弹出提示信息

- 2在生命周期回调函数中调用该方法,实现数据的更改

### 4 添加stripe斑马纹的表格结构

- 1 在对应的结构中,使用对应的作用域插槽,实现数据的展示,并把表格要展示的数据替换为trademarks
- 2 添加对应的按钮标签,并且在需要使用数据的外层,包裹一层template标签,添加作用域插槽

	- <template slot-scope="scope"> </template>

- 3 在复制对应的解构时,所有css,和js都需要一起复制

### 5 添加分页的组件

- 1 设置对应展示的效果
- 2 给对应的事件,进行修改操作
- 3 给对应的强制数据绑定的属性设置为对应的响应式数据

### 6 添加品牌和修改品牌的对话框

- 1 添加一个对应的自定义全功能的对话框
- 2 在其中嵌入一个上传头像的组件
- 3 将其中需要使用到的数据,修改为对应的响应式数据

## 绑定事件,实现前后台的交互

### 1 为左上角的添加按钮,绑定一个事件

- 1 弹出对应的添加数据的对话框
- 2 重置form对象的属性值,为空因为每次添加时,不应该有之前的数据

### 2 为弹出的对话框的确定按钮绑定一个事件

- 1 判断form对象中的属性是否都为空,如果满足则进添加品牌的操作

	- 1 调用对应的添加品牌的api接口函数,传递对应的this.form
	- 2 判盘响应的返回值的状态,如果状态码为200,则执行一系列操作

		- 1 关闭对应的添加品牌的对话框
		- 2 弹出成功的信息提示
		- 3 调用对应的更新当前页数据的函数

	- 3 如果状态码不为200,则弹出对应的错误提示

- 2 如果form对象中有id属性,则进修改品牌的操作

	- 1 调用对应的修改品牌的api接口函数,传递对应的this,form
	- 2 判盘响应的返回值的状态,如果状态码为200,则执行一系列操作

		- 1 关闭对应的添加品牌的对话框
		- 2 弹出成功的信息提示
		- 3 调用对应的更新当前页数据的函数

	- 3 如果状态码不为200,则弹出对应的错误提示

- 3 如果都不满足,则弹出对应的提示框

### 3 为修改的按钮绑定一个事件

- 1 设置对应的添加品牌的框的属性值设置为true

	- this.form = { ...form }

- 2 解构赋值传入进来的form.赋值给响应式数据

	- this.dialogFormTrademark = true

### 4 为删除的按钮绑定一个事件

- 1 调用对应的删除品牌数据的api接口函数
- 2 判盘响应的返回值的状态,如果状态码为200,则执行一系列操作
- 3 如果不为200,则弹出对应的提示框

