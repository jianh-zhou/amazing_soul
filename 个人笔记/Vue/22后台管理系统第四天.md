# 22 后台管理系统第3天

## 修改添加品台属性值

### 1 在给对应品台属性值数组添加属性值对象时,给属性值对象多添加一属性,该属性是用来判断当前是处于编辑模式还是查看模式

### 1 编辑模式

- 1 点击添加属性值按钮会进入到编辑模式

	- 为属性值数组最末尾添加一个属性值对象,该对象在正常的基础上多一个edit属性,并且让添加的这个属性值对象在表格中获取焦点,并且进入编辑模式
	- 在为文本框设置聚焦时,当前文本框还未渲染,我们需要使用this.$nextTick()

- 2 点击对应的标签会进入到编辑模式

	- 因为点击一次只能让文本输入框显示,并没有获取焦点,所以我们应该在点击时,让文本框聚焦
	- 因为页面数据属性值对象请求回来时.是没有edit属性的,以进入不到编辑模式,需要为当前属性值对象动态添加一个edit属性,  this.$set(item.'edit',true)

### 2 查看模式

- 判断当前属性值对象的属性值是否为空,如果不为空,则进入查看模式.否则就是编辑模式

### 3 保存添加的属性对象

- 1 删除属性值对象中的edit属性,并且将属性值为空的属性值对象过滤  filter

	- filter不会改变原数组,返回一个新数组

- 2 调用对应的api接口函数.将属性对象做为参数.判断请求响应状态,更新数据,关闭修改页

## 优化

### 1 在进入到添加属性的模式时,三级分类列表的选择框禁用

- 1 为三级分类的选择框绑定一个动态的disabled属性,该属性的默认值是false,也就是未禁用
- 2 给三级分类列表组件标签添加一个ref属性
- 3 监视修改或者添加属性页面的对应的动态数据,将该数据取反,并且赋值给三级分类列表是否禁用的动态数据

	- 给组件标签添加ref属性,父组件可以通过this.$refs进行访问到子组件标签对象,然后子组件标签中的数据
	- this.$refs.cs.isDisabled

### 2 在添加或者修改属性页面时,保存按钮需要在属性名有值而且属性值地对象不能都为空

- 1 将该提交框的绑定一个动态的disabled属性值,
- 2 通过计算属性,进行计算,最终获得提交框是否被禁用

## 监视和计算属性的data区别

### 监视

- 监视某一个属性,当该属性值变化时,然后操作其他属性,该方法的参数就是监视的属性的值,它只针对监视一个属性,然后通过该属性的变化,操作对应的属性

### 计算属性

- 通过计算一些属性,最终return返回计算后的属性,返回的这一个动态属性值就是计算出来的属性,它是根据一个或者多个属性进行操作

### data对象

- 用来存放一些需要的动态的初始属性值

## 封装API接口

### 在接口及参数类似的情况下,可以考虑将两个API接口函数封装在一起,

### get请求方式请求所需要的数据都是会最终拼接到url地址上,可以在书写url地址时,直接拼接,也可以使用params以占位符的形式,query则是以建筑对的形式

